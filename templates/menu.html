
<nav class="nav">
  <a href="" class="active">ğŸ  Dashboard</a>
  <a href="" class="">ğŸ—‚ï¸ Kolejka moderacji</a>
  <a href="" class="">ğŸ‘¥ UÅ¼ytkownicy</a>
  <a href="" class="">âš™ï¸ Ustawienia</a>
  <a href="">ğŸšª Wyloguj</a>
</nav>

<style>
/* * { box-sizing: border-box; }
body { margin: 0; font-family: Arial, sans-serif; } */

/* SIDEBAR */
.navbar{
  position: fixed; top:0; left:-190px; height:100vh; width:200px;
  background:#1f1f1f; color:#fff; transition:left .3s ease;
  z-index:1000; padding-top:1rem;
  overflow: hidden; /* â† brak scrolla i overflowu w sidebarze */
}
.navbar:hover{ left:0; }
.navbar::after{ content:''; position:absolute; right:-10px; top:0; width:10px; height:100%; background:transparent; }

.logo{
  font-size:.8rem; display:flex; font-weight:bold; padding:1rem; text-align:right;
  flex-direction:row; justify-content:space-between;
}
.logo a{ color:#fff; text-decoration:none; }

/* LISTA GÅÃ“WNA + DROPDOWNY W KOLUMNIE */
.nav-list,
.nav-list ul,
.nav-item,
.dropdown{
  display:flex; flex-direction:column; align-items:stretch; margin:0; padding:0; list-style:none;
}

/* PRZYCISKI SEKCJI (gÅ‚Ã³wne poziomy) */
.nav-item{ border-bottom:1px solid #333; }
.dropdown-btn{
  width:100%; padding:.75rem 1rem; background:transparent; border:none; color:#fff;
  text-align:left; font-size:1rem; cursor:pointer;
}

/* PODMENU â€” domyÅ›lnie schowane, pÅ‚ynne rozwijanie */
.dropdown{
  background:#2e2e2e;
  overflow: hidden;           /* ukryj zawartoÅ›Ä‡ przy zwiniÄ™ciu */
  max-height: 0;              /* zwiniÄ™te */
  transition: max-height .28s ease; /* pÅ‚ynne rozwijanie */
  gap:2px;
}
.dropdown li{ padding:2px 4px; }
.dropdown li a{
  display:block; width:100%; padding:.35rem .6rem;
  color:#ccc; text-decoration:none; font-size:small; border-radius:.25rem;
}
.dropdown li a:hover{ background:#444; color:#fff; }

/* POKAÅ» TYLKO GÅÃ“WNE NAGÅÃ“WKI PRZY HOVERZE SIDEBARA */
.nav-list:hover .dropdown{ max-height:0; } /* wszystko zwiniÄ™te przy samym hoverze */

/* Otwarta sekcja â€” rozwiniÄ™te podmenu (ustaw max-height na tyle, by pomieÅ›ciÅ‚o linki) */
.nav-item.open > .dropdown{ max-height: 800px; } /* moÅ¼esz zwiÄ™kszyÄ‡, jeÅ›li masz wiÄ™cej pozycji */

/* ACTIVE (LIGHT MODE domyÅ›lnie) */
.nav-item a.active,
.dropdown li a.active{
  background:#e0f7ff; color:#0077aa; font-weight:bold; border-left:4px solid #0077aa; padding-left:.8rem;
}

/* DARK MODE VARIANT */
body.dark-mode .navbar{ background:#1f1f1f; color:#fff; }
body.dark-mode .dropdown{ background:#2e2e2e; }
body.dark-mode .dropdown li a.active{
  background:#333; color:#00aaff; border-left:4px solid #00aaff;
}
body.dark-mode .nav-item a.active{
  background:#444; color:#fff; border-left:4px solid #00aaff;
}

/* PodtytuÅ‚y dziaÅ‚Ã³w w dropdownie (np. "OgÅ‚oszenia", "Forum") */
.nav-item > .dropdown > li > div{
  color:#aaa; font-size:.9rem; padding:.4rem 1rem .2rem;
}

/* Opcjonalnie: brak widocznych paskÃ³w (gdyby przeglÄ…darka mimo wszystko je rysowaÅ‚a) */
.navbar::-webkit-scrollbar{ width:0; height:0; }

/* --- FIX: wszystko jeden pod drugim w dropdownach --- */

/* sam dropdown nie jest flexem â€“ zwykÅ‚y blok */
.dropdown {
  display: block;
}

/* wÄ™zÅ‚y sekcji (np. OgÅ‚oszenia / Forum / Newsroom) teÅ¼ jako bloki */
.dropdown > li {
  display: block;
}

/* nagÅ‚Ã³wek sekcji (np. "Forum") jako peÅ‚na linia */
.dropdown > li > div {
  display: block;
  width: 100%;
}

/* lista linkÃ³w w sekcji â€” zwykÅ‚y block-layout */
.dropdown > li > ul {
  display: block;
  margin: 0 0 .25rem 0;
  padding: 0 .2rem .25rem .8rem; /* lekkie wciÄ™cie pod nagÅ‚Ã³wkiem */
  list-style: none;
}

/* kaÅ¼dy link w osobnym wierszu na peÅ‚nÄ… szerokoÅ›Ä‡ */
.dropdown > li > ul > li {
  display: block;
  float: none;              /* na wszelki wypadek, gdyby coÅ› go â€wypychaÅ‚oâ€ */
  width: 100%;
}

.dropdown > li > ul > li a {
  display: block;
  width: 100%;
  white-space: normal;      /* pozwÃ³l Å‚amaÄ‡ dÅ‚ugie tytuÅ‚y */
}

/* gdy uÅ¼ywasz ikon w <a>, zachowaj jednÄ… liniÄ™ w obrÄ™bie linku */
.dropdown > li > ul > li a .icon {
  margin-right: .4rem;
}

</style>

<!-- <button id="theme-toggle" onclick="toggleTheme()" style="
            position: fixed;
            top: 3px;
            right: 0px;
            font-size: 1.2rem;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 9999;">ğŸŒ™</button> -->
<nav class="nav">
    <!-- <div class="logo">
        <div><a href="/">ğŸ  Start</a></div>
        <div>ğŸ“ Menu</div>
    </div> -->
    
    <ul class="nav-list">

      <!-- News to Video â†’ Tekst (admin + moderator) -->
      {% if session.get('role') in ['admin','redakcja','moderator','tester'] %}
      <li class="nav-item">
        <button class="dropdown-btn">ğŸ™ï¸ News â†’ Video â–¾</button>
        <ul class="dropdown">
          <li class="{% if request.path == '/news-to-video/create' %}active{% endif %}">
            <a href="/news-to-video/create">ğŸ“¤ Create NEW</a>
          </li>
          <li class="{% if request.path == '/news-to-video/' or request.path.startswith('/news-to-video/video-news-list') %}active{% endif %}">
            <a href="/news-to-video/video-news-list">ğŸ“„ Lista projektÃ³w</a>
          </li>
          <li class="{% if request.path.startswith('/news-to-video/provider-proxy') %}active{% endif %}">
            <a href="/news_to_video/provider_proxy_form">ğŸš· Provider Proxy</a>
          </li>
        </ul>
      </li>
      <li class="nav-item" style="display:none">
        <a class="{% if request.path.startswith('/price-compare') %}active{% endif %}" href="{{ url_for('price_compare.index') }}">
          ğŸ›’ PorÃ³wnanie cen
        </a>
      </li>
      <li class="nav-item">
        <a class="{% if request.path.startswith('/materialy-reklamowe') %}active{% endif %}" href="{{ url_for('materialy_reklamowe.index') }}">
          ğŸ–¼ï¸ MateriaÅ‚y reklamowe
        </a>
      </li>
      <li class="nav-item">
        <button class="dropdown-btn">News -> Image</button>
        <ul class="dropdown">
          <li class="{% if request.path == url_for('news_to_image.create_form') %}active{% endif %}">
            <a href="{{ url_for('news_to_image.create_form') }}">Generuj obrazy</a>
          </li>
          <li class="{% if request.path == url_for('news_to_image.projects_list') %}active{% endif %}">
            <a href="{{ url_for('news_to_image.projects_list') }}">Lista projektÃ³w</a>
          </li>
        </ul>
      </li>
      {% endif %}

    </ul>


</nav>

<script>
  // ACCORDION: tylko jedna sekcja otwarta naraz
  document.querySelectorAll('.dropdown-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const item = btn.closest('.nav-item');
      const openItem = document.querySelector('.nav-item.open');
      if (openItem && openItem !== item) openItem.classList.remove('open');
      item.classList.toggle('open');
    });
  });

  // THEME: zapisz/odtwÃ³rz wybÃ³r
  (function initTheme(){
    const saved = localStorage.getItem('theme'); // 'light' | 'dark'
    if (saved === 'dark') document.body.classList.add('dark-mode');
    updateThemeIcon();
  })();

  function setTheme(mode){
    if (mode === 'dark') document.body.classList.add('dark-mode');
    else document.body.classList.remove('dark-mode');
    localStorage.setItem('theme', mode);
    // (opcjonalnie) aktualizacja ikonki przycisku:
    const btn = document.getElementById('theme-toggle');
    if (btn) btn.textContent = mode === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
  }

  function toggleTheme(){
    const isDark = document.body.classList.contains('dark-mode');
    setTheme(isDark ? 'light' : 'dark');
  }

  /*  
  function setTheme(mode){
    if (mode === 'dark') document.body.classList.add('dark-mode');
    else document.body.classList.remove('dark-mode');
    localStorage.setItem('theme', mode);
    updateThemeIcon();
  }
  */
  function updateThemeIcon(){
    const btn = document.getElementById('theme-toggle');
    if (!btn) return;
    const isDark = document.body.classList.contains('dark-mode');
    btn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
  }
</script>
