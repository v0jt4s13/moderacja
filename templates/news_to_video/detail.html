{% extends "base.html" %}

{% block title %}Szczeg√≥≈Çy projektu ‚Äî {{ manifest.title }}{% endblock %}

{% block header %}Szczeg√≥≈Çy projektu{% endblock %}

{% block content %}

  <style>
    /* body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:20px;max-width:1000px} */
    /* header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px} */
    .meta{display:grid;grid-template-columns:160px 1fr;gap:8px 16px;margin-bottom:20px}
    /* a.button{display:inline-block;padding:10px 14px;background:#0d6efd;color:#fff;text-decoration:none;border-radius:10px} */
    video{width:100%;max-width:100%;height:auto;border-radius:10px}
    pre{background:#333232;padding:12px;border-radius:8px;overflow:auto}
    .links a{margin-right:12px}
    a.button, button.button{
      display:inline-block;
      padding:10px 14px;
      background:#11111185;
      color: whitesmoke !important;
      text-decoration:none;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-size: 1em;
      font-weight: 700;
      border-width: 0 !important;
    }
    .button.danger{background:#c62828}
    .button.info{background:#0d6efd}
    .header{
      width: auto;
      background: black;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: flex-start;
      padding-left: 20px;
      margin-bottom: 20px;
      font-size: 0.7em;
    }
    .status-badge,
    .tag {
      font-size:12px;padding:4px 8px;border-radius:6px;background:#20a84b;
    }
    /* .status-badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#f0f0f0;font-weight:600} */
    .status-queued{background:#f8dc81;color: #222;}
    .status-processing{background:#71a5f3}
    .status-done{background:#20a84b}
    .status-error{background:#f38790}
    .videos-wrap { 
      display:grid;
      gap:16px;
      grid-template-columns:1fr;
      width: calc(100% / 2 - 5%);
    }
    .videos-wrap .muted {
        font-size: 15px;
        padding: 8px 10px;
        background: #205ba8;
    }
    .videos-wrap.flex {
        display: flex;
        flex-direction: row;
        margin-top: 2em;
        column-gap: 1em;
        width: 100%;
    }
    .video-box {
      /* width: calc(100% / {{ rel_count }}) */
    }
    .manifest-payload-text {
        padding: 7px;
    }
    .manifest-payload {
        display: flex;
        flex-direction: column;
        row-gap: 20px;
    }
    .editable-field .edit { display: none; }
    .editable-field.editing .edit { display: block; }
    .editable-field.editing .view { display: none; }
    .card {
      width: auto;
    }
    .renderer-val {
      text-align: left;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      padding: 5px;
    }
    .path {
      text-wrap-style: balance;
    }
    .metadata__value {
      text-align: left;
      display: flex;
    flex-direction: column;
    }
  </style>

<div class="header">
  <h2>{{ manifest.title }}</h2>
  <div style="width:-webkit-fill-available;text-align:end;padding-bottom:15px;">
    <a class="button" style="display:inline;"
        href="{{ url_for('news_to_video.s3_media_html') }}">‚Üê S3: lista medi√≥w</a>
    <a class="button" style="display:inline;"
        href="{{ url_for('news_to_video.index_html') }}">‚Üê Projekty lokalne</a>

    <form action="{{ url_for('news_to_video.update_project_view', project_id=manifest.project_id) }}"
          method="post" style="display:inline; background-color: transparent;"
          onsubmit="this.querySelector('button').disabled=true; this.querySelector('button').textContent='Przerenderowujƒô‚Ä¶';">
      <button class="button info" type="submit">‚ôª Przerenderuj</button>
    </form>

    <form action="{{ url_for('news_to_video.delete_project_view', project_id=manifest.project_id) }}"
          method="post" style="display:inline; background-color: transparent;"
          onsubmit="return confirm('UsunƒÖƒá LOKALNIE ten projekt? Pliki w S3 pozostanƒÖ.');">
      <button class="button danger" type="submit" title="Usuwa katalog projektu z dysku, S3 zostaje">üóëÔ∏è Usu≈Ñ lokalnie</button>
    </form>
  </div>
</div>

<div style="width:-webkit-fill-available;text-align:end;padding-bottom:15px;">
  {% if manifest.outputs and manifest.outputs.openai_sora_config %}
  <form action="{{ url_for('news_to_video.rerender_sora_same_config', project_id=manifest.project_id) }}"
        method="post" style="display:inline; background-color: transparent;"
        onsubmit="this.querySelector('button').disabled=true; this.querySelector('button').textContent='Kolejkujƒô‚Ä¶';">
    <button class="button info" type="submit">‚ü≥ Przerenderuj Sora (te same ustawienia)</button>
  </form>
  {% endif %}

  <form action="{{ url_for('news_to_video.generate_audio_only', project_id=manifest.project_id) }}"
        method="post" style="display:inline; background-color: transparent;"
        onsubmit="this.querySelector('button').disabled=true; this.querySelector('button').textContent='Generujƒô audio‚Ä¶';">
    <button class="button" type="submit">üéôÔ∏è Generuj tylko audio</button>
  </form>
</div>

<h3>Media</h3>
<div class="col">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 col-12">
          <div class="asset-details-preview__placeholder"></div>
          <div class="render-asset-tiles mb-2">
            <div class="render-asset-tile">
              <div class="render-asset-tile__image">
                
              </div>
              <div class="description">
                <div><strong>Thumbnails (manifest.payload.media)</strong></div>
                {% for key, val in manifest.payload.items(): %}
                  {% if key not in ['title','brand','formats','renderer','subtitles','tts','transitions']: %}
                    {% if key in ['media']: %}
                      <div class="manifest-payload-media">
                        {% for row in val: %}
                          <img src="{{row.src}}" style="height:12vh">
                        {% endfor %}
                      </div>        
                    {% endif %}
                  {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-12">
          <table class="metadata">
            <tbody>
              <tr>
                <td class="metadata__key">Project ID</td>
                <td class="metadata__value">{{ manifest.project_id }}</td>
              </tr>
              <tr>
                <td class="metadata__key">Status</td>
                <td class="metadata__value">
                  <span class="badge text-primary bg-light">
                    <div class="me-2 spinner-border spinner-border-sm text-secondary"></div>
                    <span id="statusBadge" class="status-badge">‚Äì</span>
                  </span>
                </td>
              </tr>
              <tr>
                <td class="metadata__key">URL</td>
                <td class="metadata__value">‚Äî</td>
              </tr>
              <tr>
                <td class="metadata__key">Video settings</td>
                <td class="metadata__value">
                  <code>Aspect Ratio (manifest.payload.formats):<br>
                    {% for video_format in manifest.payload.formats %}
                      <span style="padding:0px 10px"><b>{{video_format}}</b>;</span>
                    {% endfor %}
                  </code>
                  <br><code>Transitions (manifest.payload.transitions):<br>
                    {% for key, val in manifest.payload.transitions.items(): %}
                      <span style="padding:0px 10px">{{key}}: <b>{{val}}</b></span> 
                    {% endfor %}
                  </code>
                </td>
              </tr>
              <tr>
                <td class="metadata__key">Created</td>
                <td class="metadata__value">{{ manifest.created_at }}</td>
              </tr>
              
              {% if manifest.logs or manifest.error %}
                <tr>
                {% if manifest.logs %}
                  <td class="metadata__key">Logs</td>
                  <td class="metadata__value">{{ manifest.logs }}</td>
                {% endif %}
                {% if manifest.error %}
                  <td class="metadata__key">Error</td>
                  <td class="metadata__value">{{ manifest.error }}</td>
                {% endif %}
                </tr>
              {% endif %}

              {% if manifest.payload.brand.logo_path %}
                <tr>
                  <td class="metadata__key">Brand info</td>
                  <td class="metadata__value">
                    üèûÔ∏è <code>{{ manifest.payload.brand.logo_path.split('/')[-1] }}</code>
                    <br>
                    <code>
                      Position: <b>{{ manifest.payload.brand.position }}</b> 
                      Opacity: <b>{{ manifest.payload.brand.opacity }}</b> 
                      Scale: <b>{{ manifest.payload.brand.scale }}</b>
                    </code>
                    
                  </td>
                </tr>
              {% endif %}
                
              <tr>
                <td class="metadata__key">Text</td>
                <td class="metadata__value" colspan="2" style="text-align: left;">
                  <code>{{ manifest.payload.text }}</code>
                </td>
              </tr>  
              
              {% if manifest.payload.tts: %}
                <tr>
                  <td class="metadata__key">Transcription</td>
                  <td class="metadata__value">
                    <code>{{ manifest.payload.tts.provider }}</code>
                    <code>
                    Lang: <b>{{ manifest.payload.tts.language }}</b>
                    Speed: <b>{{ manifest.payload.tts.speed }}</b><br>
                    {{ manifest.payload.tts.voice }}
                    </code>
                  </td>
                </tr>
              {% endif %}
              {% if manifest.payload.subtitles: %}
                <tr>
                  <td class="metadata__key">Subtitles</td>
                  <td class="metadata__value">
                    {% if manifest.payload.subtitles.burn_in %}
                      ‚ù§Ô∏è‚Äçüî•
                    {% endif %}
                  </td>
                </tr>
              {% endif %}

              {% if manifest.payload.renderer: %}
                <tr>
                  <td class="metadata__key">Renderer</td>
                  <td class="metadata__value">
                    <code>
                      {% if manifest.payload.renderer.type == 'shotstack': %}
                        <img style="width: 200px;" src="data:image/png;base64,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">
                        <hr>
                      {% elif manifest.payload.renderer.type == 'openshot': %}
                        <img style="width: 200px;" src="data:image/jpeg;base64,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">
                        <hr>
                      {% else %}
                        manifest.payload.renderer.type=>{{ manifest.payload.renderer.type }}
                        <hr>
                      {% endif %}
                    </code>
                  </td>
                </tr>
              {% endif %}

              {% if manifest.outputs: %}
                <tr>
                  <td class="metadata__key">Renderer&nbsp;responds</td>
                  <td class="metadata__value">
                    
                    {% if manifest.outputs %}
                      {% set start_path = False %}
                      {% set namespace = {'start_path': False} %}
                      {% for key, val in manifest.outputs.items(): %}
                        <code class='renderer-val'>
                        {% if key == 'status': %}
                          <!-- {{ key }}:  -->
                          <span id="statusBadge" class="status-badge">{{manifest.outputs.status}}</span>
                        {% elif key == 'pid': %}
                          <b>{{ val }}</b>
                        {% elif key == 'libopenshot_available': %}
                          {% if not val: %}<b>‚ùå {{ val }}</b>{% else %}<b>‚úÖ {{ val }}</b>{% endif %}
                        {% elif key == 'project_path': %}
                          <span class="path">{{val}}</span>
                        {% else: %}
                          {{ key }}: <b>{{ val }}</b>
                        {% endif %}
                        </code>
                      {% endfor %}
                    {% endif %}

                  </td>
                </tr>
              {% endif %}

            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<h3>Brand</h3>
<div class="col">
  <div class="card" style="padding:12px;">
    {% set brand = manifest.payload.brand if manifest.payload and manifest.payload.brand else {} %}
    {% if brand %}
      <div>Logo path: <code>{{ brand.logo_path }}</code></div>
      {% if brand_http %}
        <img src="{{ brand_http }}" alt="brand logo" style="max-height:80px;margin-top:8px;" />
      {% elif brand_rel %}
        <img src="{{ url_for('news_to_video.serve_file', relpath=brand_rel) }}" alt="brand logo" style="max-height:80px;margin-top:8px;" />
      {% else %}
        <div class="muted">Brak odnalezionej ≈õcie≈ºki do logo.</div>
      {% endif %}
    {% else %}
      <div class="muted">Brak sekcji brand w payload.</div>
    {% endif %}
  </div>
  
  {% if manifest.outputs.openai_sora_prompt or manifest.outputs.openai_sora_config %}
  <div class="card" style="padding:12px;margin-top:10px;">
    <div style="display:flex;align-items:center;gap:10px;">
      <a href="https://openai.com/sora" target="_blank" rel="noopener">
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4d/OpenAI_Logo.svg" alt="Sora2" style="height:20px;vertical-align:middle;" />
      </a>
      <strong>OpenAI Sora</strong>
    </div>
    {% if manifest.outputs.openai_sora_prompt %}
      <div style="margin-top:8px;">
        <div class="muted">Prompt u≈ºyty do renderu:</div>
        <pre style="white-space:pre-wrap;">{{ manifest.outputs.openai_sora_prompt }}</pre>
      </div>
    {% endif %}
    {% if manifest.outputs.openai_sora_config %}
      <div class="muted">Konfiguracja:</div>
      <pre>{{ manifest.outputs.openai_sora_config | tojson(indent=2) }}</pre>
    {% endif %}
    {% if manifest.outputs.openai_sora_request %}
      <div class="muted">Payload do API (preview):</div>
      <pre>{{ manifest.outputs.openai_sora_request | tojson(indent=2) }}</pre>
    {% endif %}
  </div>
  {% endif %}
</div>
<!-- {{manifest.outputs.keys()}}<hr> -->
<!-- {{ manifest.outputs | tojson|safe }}<hr> -->

<section>
  <!-- {{manifest.payload.keys()}} -->
  <!-- ['project_id', 'title', 'created_at', 'payload', 'status', 'outputs', 'logs', 'error', 'vendor'] -->
  <div class="manifest-payload-wrap">
    <div class="manifest-payload">
      {% for key, val in manifest.payload.items(): %}
        {% if key not in ['media','text','title','brand','formats','renderer','subtitles','tts','transitions']: %}
            Nierozpoznane media:<br>
            {{ key }} ==> {{ val }}<hr>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  {% if mp4_rel %}{{mp4_rel}}{% endif %}
  {% if mp4_1x1_rel %}{{mp4_1x1_rel}}{% endif %}
  {% if mp4_9x16_rel %}{{mp4_9x16_rel}}{% endif %}
  <div class="videos-wrap flex">
    {% if mp4_rel %}
      <div id="block-169" style="display:block">
        <div class="muted">16:9</div>
        <video id="vid-169" controls preload="metadata" class="video-box">
          <source src="{{ url_for('news_to_video.serve_file', relpath=mp4_rel) }}" type="video/mp4">
        </video>
      </div>
    {% else %}
      <div id="block-169" style="display:none">
        <div class="muted">16:9</div>
        <video id="vid-169" controls preload="metadata" class="video-box"></video>
      </div>
    {% endif %}
      
    {% if mp4_1x1_rel %}
      <div id="block-11" style="display:block">
        <div class="muted">1:1</div>
        <video id="vid-11" controls preload="metadata" class="video-box">
          <source src="{{ url_for('news_to_video.serve_file', relpath=mp4_1x1_rel) }}" type="video/mp4">
        </video>
      </div>
    {% else %}
      <div id="block-11" style="display:none">
        <div class="muted">1:1</div>
        <video id="vid-11" controls preload="metadata" class="video-box"></video>
      </div>
    {% endif %}
      
    {% if mp4_9x16_rel %}
      <div id="block-916" style="display:block">
        <div class="muted">9:16</div>
        <video id="vid-916" controls preload="metadata" class="video-box">
          <source src="{{ url_for('news_to_video.serve_file', relpath=mp4_9x16_rel) }}" type="video/mp4">
        </video>
      </div>
    {% else %}
      <div id="block-916" style="display:none">
        <div class="muted">9:16</div>
        <video id="vid-916" controls preload="metadata" class="video-box"></video>
      </div>
    {% endif %}
  </div>



  <p class="links" style="margin-top:10px">
    {% if mp4_rel %}
      <a href="{{ url_for('news_to_video.serve_file', relpath=mp4_rel) }}" download>Pobierz wideo 16:9 (MP4)</a>
    {% endif %}
    {% if mp4_1x1_rel %}
      <a href="{{ url_for('news_to_video.serve_file', relpath=mp4_1x1_rel) }}" download>Pobierz wideo 1:1 (MP4)</a>
    {% endif %}
    {% if mp4_9x16_rel %}
      <a href="{{ url_for('news_to_video.serve_file', relpath=mp4_9x16_rel) }}" download>Pobierz wideo 9:16 (MP4)</a>
    {% endif %}
    {% if srt_rel %}
      <a href="{{ url_for('news_to_video.serve_file', relpath=srt_rel) }}" download>Pobierz napisy (.srt)</a>
    {% endif %}
    {% if audio_rel %}
      <a href="{{ url_for('news_to_video.serve_file', relpath=audio_rel) }}" download>Pobierz narracjƒô (MP3)</a>
    {% endif %}
  </p>
</section>

<h3>Manifest</h3>
<pre>{{ manifest | tojson(indent=2) }}</pre>


<script>
  // Prosty polling statusu projektu i auto-od≈õwie≈ºenie po zako≈Ñczeniu
  (function(){
    const initialStatus = ({{ (manifest.status or '""') | tojson }} || '').toLowerCase();
    let lastStatus = initialStatus;
    async function poll(){
      try{
        const res = await fetch("{{ url_for('news_to_video.api_status', project_id=manifest.project_id) }}", {cache:'no-store'});
        if(!res.ok) return;
        const data = await res.json();
        const st = String(data.status||'').toLowerCase();
        const badge = document.getElementById('statusBadge');
        if (badge && st){
          badge.textContent = st;
          badge.classList.remove('status-queued','status-processing','status-done','status-error');
          badge.classList.add('status-' + (st.replace(/[^a-z]/g,'')));
        }
        if (lastStatus !== 'done' && st === 'done'){
          // pe≈Çny reload, aby podpiƒÖƒá nowe ≈õcie≈ºki wideo i linki
          window.location.reload();
        }
        lastStatus = st;
      }catch(e){ /* ignore */ }
    }
    setInterval(poll, 3000);
  })();
</script>

<!-- 
<script>
  const pid = "{{ manifest.project_id }}";
  const manifestPayloadFormats = document.getElementById('manifest-payload-formats');
  if (!manifestPayloadFormats) return;
  const badge = document.getElementById('statusBadge');
  const viewEl  = manifestPayloadFormats.querySelector('.view');
  const editEl  = manifestPayloadFormats.querySelector('.edit');
  const stateEl = manifestPayloadFormats.querySelector('#formats-save-state');
  const saveUrl = `{{ url_for('news_to_video.api_update_manifest_field', project_id=manifest.project_id) }}`;

  editEl.addEventListener('change', async (e) => {
    if (e.target.name !== 'formats') return;

    const checked = Array.from(editEl.querySelectorAll('input[name="formats"]:checked'))
                          .map(i => i.value);

    // zablokuj checkboxy na czas zapisu
    const inputs = Array.from(editEl.querySelectorAll('input[name="formats"]'));
    inputs.forEach(i => i.disabled = true);
    if (stateEl) stateEl.textContent = 'Zapisujƒô‚Ä¶';

    try {
      const payload = {
        path: block.dataset.keyPath || 'payload.formats', // dot-path w manife≈õcie
        op: 'set',
        value: checked
      };
      const res = await fetch(saveUrl, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      if (!data.ok) throw new Error(data.error || 'B≈ÇƒÖd zapisu');

      // 3) Aktualizacja widoku (lista pogrubionych format√≥w)
      if (viewEl) {
        viewEl.innerHTML = checked.length
          ? checked.map(v => `<span style="padding:0 10px"><b>${v}</b>;</span>`).join('')
          : `<span style="padding:0 10px;opacity:.7">(brak)</span>`;
        viewEl.insertAdjacentHTML('beforeend', `<span class="hint" style="padding-left:10px;opacity:.7">‚Äî kliknij, aby edytowaƒá</span>`);
      }

      if (stateEl) stateEl.textContent = 'Zapisano ‚úì';
      // Opcjonalnie: od razu wyj≈õcie z trybu edycji
      setTimeout(() => { block.classList.remove('editing'); if (stateEl) stateEl.textContent=''; }, 350);
    } catch (err) {
      console.error(err);
      if (stateEl) stateEl.textContent = 'B≈ÇƒÖd zapisu ‚úó';
    } finally {
      inputs.forEach(i => i.disabled = false);
    }
  });

  function setBadge(status){
    const clsBase = "status-badge";
    const map = {queued:"status-queued", processing:"status-processing", done:"status-done", error:"status-error"};
    badge.className = clsBase + " " + (map[status] || "");
    badge.textContent = status.toUpperCase();
  }

  function setVideo(id, url){
    const block = document.getElementById("block-"+id);
    const vid = document.getElementById("vid-"+id);
    if (!url) return;
    if (block && vid){
      // unikaj podw√≥jnych <source>
      vid.innerHTML = "";
      const src = document.createElement("source");
      src.src = url; src.type = "video/mp4";
      vid.appendChild(src);
      block.style.display = "block";
      // w Safari czasem trzeba wywo≈Çaƒá load()
      try { vid.load(); } catch(e){}
    }
  }

  function setLink(id, url){
    const a = document.getElementById(id);
    if (!a) return;
    if (url){
      a.style.display = "inline-block";
      a.href = url;
    } else {
      a.style.display = "none";
      a.removeAttribute("href");
    }
  }

  async function poll() {
    const url = `/news-to-video/api/status/${encodeURIComponent(pid)}`;
    try {
      const res = await fetch(url, {
        method: 'GET',
        cache: 'no-store',
        credentials: 'same-origin',                    // wy≈õlij ciasteczka (auth)
        headers: {
          'Accept': 'application/json',                // prosimy o JSON
          'X-Requested-With': 'XMLHttpRequest'        // hint dla backendu
        },
        redirect: 'follow'                             // lub 'manual' je≈õli chcesz wykrywaƒá 302
      });

      // 204 = brak danych jeszcze, nie parsujemy
      if (res.status === 204) return;

      const ct = (res.headers.get('content-type') || '').toLowerCase();
      let data;

      if (!res.ok) {
        // spr√≥buj odczytaƒá cia≈Ço (JSON/tekst) do log√≥w
        let body = '';
        try { body = ct.includes('application/json') ? JSON.stringify(await res.json()) : await res.text(); } catch {}
        console.error(`Status API error ${res.status}:`, body);
        return; // nie wysadzaj timera ‚Äì spr√≥bujemy w nastƒôpnym ticku
      }

      if (!ct.includes('application/json')) {
        // Dosta≈Çe≈õ HTML (np. <!DOCTYPE ...>) albo co≈õ innego
        const text = await res.text();
        console.error('Status API returned non-JSON:', text.slice(0, 200));
        return;
      }

      data = await res.json();

      const st = (data.status || 'unknown').toLowerCase();
      setBadge(st);

      const outs = data.outputs || {};
      const v169 = outs.mp4_16x9_url || "";
      const v11  = outs.mp4_1x1_url || "";
      const v916 = outs.mp4_9x16_url || "";
      const srt  = outs.srt_url || "";
      const aud  = outs.audio_url || "";

      if (v169 || v11 || v916){
        setVideo("169", v169);
        setVideo("11",  v11);
        setVideo("916", v916);
      }
      setLink("a-srt",   srt);
      setLink("a-audio", aud);

      if (st === "done" || st === "error"){
        clearInterval(window.__pollTimer);
      }
    } catch (e) {
      console.error('Status API fetch failed:', e);
      // zostaw timer ‚Äî kolejny tick spr√≥buje ponownie
    }
  }

  setBadge("{{ manifest.status or 'created' }}".toLowerCase());
  window.__pollTimer = setInterval(poll, 3000);
  poll();

</script> -->

<!-- 
<script>
  (function () {
    const pid = "{{ manifest.project_id }}";
    const block = document.getElementById('manifest-payload-formats');
    if (!block) return;

    const viewEl  = block.querySelector('.view');
    const editEl  = block.querySelector('.edit');
    const stateEl = block.querySelector('#formats-save-state');
    const saveUrl = `{{ url_for('news_to_video.api_update_manifest_field', project_id=manifest.project_id) }}`;

    // 1) Wej≈õcie/wyj≈õcie z trybu edycji po klikniƒôciu w obszar
    block.addEventListener('click', (e) => {
      // Nie prze≈ÇƒÖczaj, gdy klik wewnƒÖtrz checkbox√≥w/labeli
      if (e.target.closest('.edit')) return;
      block.classList.toggle('editing');
    });

    // 2) Autozapis przy zmianie checkbox√≥w
    editEl.addEventListener('change', async (e) => {
      if (e.target.name !== 'formats') return;

      const checked = Array.from(editEl.querySelectorAll('input[name="formats"]:checked'))
                           .map(i => i.value);

      // zablokuj checkboxy na czas zapisu
      const inputs = Array.from(editEl.querySelectorAll('input[name="formats"]'));
      inputs.forEach(i => i.disabled = true);
      if (stateEl) stateEl.textContent = 'Zapisujƒô‚Ä¶';

      try {
        const payload = {
          path: block.dataset.keyPath || 'payload.formats', // dot-path w manife≈õcie
          op: 'set',
          value: checked
        };
        const res = await fetch(saveUrl, {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify(payload)
        });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        if (!data.ok) throw new Error(data.error || 'B≈ÇƒÖd zapisu');

        // 3) Aktualizacja widoku (lista pogrubionych format√≥w)
        if (viewEl) {
          viewEl.innerHTML = checked.length
            ? checked.map(v => `<span style="padding:0 10px"><b>${v}</b>;</span>`).join('')
            : `<span style="padding:0 10px;opacity:.7">(brak)</span>`;
          viewEl.insertAdjacentHTML('beforeend', `<span class="hint" style="padding-left:10px;opacity:.7">‚Äî kliknij, aby edytowaƒá</span>`);
        }

        if (stateEl) stateEl.textContent = 'Zapisano ‚úì';
        // Opcjonalnie: od razu wyj≈õcie z trybu edycji
        setTimeout(() => { block.classList.remove('editing'); if (stateEl) stateEl.textContent=''; }, 350);
      } catch (err) {
        console.error(err);
        if (stateEl) stateEl.textContent = 'B≈ÇƒÖd zapisu ‚úó';
      } finally {
        inputs.forEach(i => i.disabled = false);
      }
    });
  })();
</script> -->

{% endblock %}

